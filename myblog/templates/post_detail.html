{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>✦ {{post.title}} ✦</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/post_detail.css' %}">
</head>
<body data-theme="light" class="crt">
    <!-- Marquee -->
    <div class="marquee">
        <div class="marquee-content">
            ✦ WELCOME TO JOJOGEEK CHAOTIC HOUSE !!!! ✦ STILL UNDER CONSTRUCTION ✦ NEW POSTS EVERY WEEK (I guess) ✦ 
        </div>
    </div>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-laptop-code blink"></i>
                    Jojo<span>Geek</span>weblog
                </div>
                
                <!-- Desktop Navigation -->
                <nav class="desktop-nav">
                    <ul>
                        <li><a href="#"><i class="fas fa-home"></i> Home</a></li>
                        <li><a href="#"><i class="fas fa-keyboard"></i> Blog</a></li>
                        <li><a href="#"><i class="fas fa-user-astronaut"></i> About</a></li>
                        <li><a href="#"><i class="fas fa-folder-open"></i> Categories</a></li>
                        <li><a href="#"><i class="fas fa-envelope"></i> Contact</a></li>
                        <li>
                            <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                                <i class="fas fa-moon dark-mode-icon"></i>
                                <i class="fas fa-sun light-mode-icon"></i>
                            </button>
                        </li>
                    </ul>
                </nav>
                
                <!-- Mobile Navigation Toggle -->
                <button class="mobile-nav-toggle" id="mobileNavToggle" aria-label="Toggle navigation menu">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
        
        <!-- Mobile Navigation -->
        <nav class="mobile-nav" id="mobileNav">
            <ul>
                <li><a href="#"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="#"><i class="fas fa-keyboard"></i> Blog</a></li>
                <li><a href="#"><i class="fas fa-user-astronaut"></i> About</a></li>
                <li><a href="#"><i class="fas fa-folder-open"></i> Categories</a></li>
                <li><a href="#"><i class="fas fa-envelope"></i> Contact</a></li>
                <li>
                    <button class="theme-toggle" id="mobileThemeToggle" aria-label="Toggle dark mode">
                        <i class="fas fa-moon dark-mode-icon"></i>
                        <i class="fas fa-sun light-mode-icon"></i>
                        <span>Dark Theme</span>
                    </button>
                </li>
            </ul>
        </nav>
        
        <!-- Overlay for mobile menu -->
        <div class="overlay" id="overlay"></div>
    </header>

    <!-- Breadcrumb -->
    <div class="breadcrumb">
        <div class="container">
            <ul>
                <li style="font-size: 17px;"><a href="/">Home</a></li>
                <li style="font-size: 17px;"><a href="/">Blog</a></li>
                <li style="font-size: 17px;">Post</li>
                <li style="font-size: 17px;">{{post.title}}</li>
            </ul>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container">
        <div class="post-content">
            <!-- Post Main Content -->
            <article class="post-main">
                <div class="post-header">
                    {% if post.category %}
                    <span class="post-category">{{post.category.name}}</span>
                    {% else %}
                    <span class="post-category">Uncategorized !</span>
                    {% endif %}
                    <h1 class="post-title">{{post.title}}</h1>
                    <div class="post-meta">
                        <span><i class="fas fa-user"></i>{{ post.author.username }}</span>
                        <span><i class="fas fa-calendar"></i> {{ post.create_at }}</span>
                        <span><i class="fas fa-clock"></i> 8 min read</span>
                        <span><i class="fas fa-comments"></i> 24 comments</span>
                    </div>
                </div>
                {% if post.image %}
                <div class="post-image" style="background-image: url({{post.image.url}});"></div>
                {% endif %}
                <div class="post-body">
                    {{post.content}}
                </div>
                
                <div class="post-tags">
                    {% for tag in post.tags.all %} 
                    <span class="post-tag">{{tag.name}}</span>
                    {% if not forloop.last %}, {% endif %}
                        {% empty %}
                        {% endfor %} 
                </div>
                
                <div class="post-actions">
                    <a href="/" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Home Page</a>
                    <div>
                        <a href="#" class="btn"><i class="fas fa-share-alt"></i> Share</a>
                        <a href="#" class="btn"><i class="fas fa-bookmark"></i> Save</a>
                    </div>
                </div>
            </article>
            
            <!-- Sidebar -->
            <aside class="sidebar">
                <!-- Author Widget -->
                <div class="sidebar-widget author-widget">
                    <div class="author-avatar">
                    <img src="{% static 'images/thecreatorpfp.png' %}" alt="logo"
                        style="width: 100px;height: 100px;border-radius: 50%;">
                    </div>
                    <h3 class="author-name">The Creator</h3>
                    <p class="author-bio">A She/her developer who loves engaging in whatever tech-related stuff could be found.</p>
                    <div class="author-social">
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                        <a href="#"><i class="fab fa-github"></i></a>
                    </div>
                </div>
                
                <!-- Recent Posts Widget -->
                <div class="sidebar-widget recent-posts">
                    <h3 class="widget-title">Recent Posts</h3>
                    <ul>
                        {% for post in recent_posts %}
                        <li>
                            <a href="{% url 'post_detail' post.title|slugify %}" class="recent-post-title">{{post.title}}</a>
                            <span class="recent-post-date">{{post.create_at}}</span>
                        </li>
                       {% empty %}
                       <li>no recent posts</li>
                        {% endfor %}
                    </ul>
                </div>
                
                <!-- Categories Widget -->
                <div class="sidebar-widget categories">
                    <h3 class="widget-title">Categories</h3>
                    <ul>
                        {% for cat in top_categories %}
                        <li>
                            <a href="/">{{cat.name}}<span class="category-count">{{cat.post_count}}</span></a>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </aside>
        </div>
        
        <!-- Comments Section -->
        <section class="comments-section">
            <h2 class="comments-title">Comments ({{comments.count}})</h2>
            
           
            <div class="comment">
                {% for comment in comments %}
                <div class="comment-each">
                <div class="comment-header">
                    <span class="comment-author">{{ comment.name }}</span>
                    <span class="comment-date">{{ comment.created_at }}</span>
                </div>
                <div class="comment-body">
                    {{ comment.body }}
                </div>
                <a href="#" class="comment-reply" data-id="{{ comment.id }}">Reply</a>
                <!-- <br>
                <hr style="border-style: dashed; height: 1px; border: 2;">
                <br> -->
                <!-- Admin Reply -->
                 <!-- <div class="admin-reply">
                    <div class="admin-reply-header">
                        {% for reply in comment.replies.all %}
                        <span class="comment-author">{{ reply.name }}<span class="admin-badge">ADMIN</span></span>
                        <span class="comment-date">{{ reply.create_at }}</span>
                    </div>
                    <div class="comment-body">
                        {{ reply.body }}
                        {% endfor %}
                    </div>
                </div>  -->
                </div>
                {% empty %}
                <div class="comment-body">
                       <p>no comments yet</p> 
                </div>
                {% endfor %}
            </div>
            
            <!-- <div class="comment">
                <div class="comment-header">
                    <span class="comment-author">PixelPusher</span>
                    <span class="comment-date">June 12, 2023</span>
                </div>
                <div class="comment-body">
                    <p>As a game developer myself, I often look to SNES games for inspiration. The constraints forced developers to be creative in ways we don't see as often today. Thanks for highlighting this!</p>
                </div>
                <a href="#" class="comment-reply">Reply</a> -->
                
                <!-- Admin Reply -->
                <!-- <div class="admin-reply">
                    <div class="admin-reply-header">
                        <span class="comment-author">Alex Retro <span class="admin-badge">ADMIN</span></span>
                        <span class="comment-date">June 12, 2023</span>
                    </div>
                    <div class="comment-body">
                        <p>That's a great point! Modern game development has so many tools and possibilities that it's easy to get lost in options. The SNES era forced developers to focus on what truly mattered - creating fun, engaging experiences with limited resources. I'd love to hear about any specific SNES games that have inspired your work!</p>
                    </div>
                </div>
            </div> -->
            
            <!-- <div class="comment">
                <div class="comment-header">
                    <span class="comment-author">NostalgiaNerd</span>
                    <span class="comment-date">June 12, 2023</span>
                </div>
                <div class="comment-body">
                    <p>Don't forget about the amazing RPGs on the system! Final Fantasy VI, Earthbound, Secret of Mana... these games had storytelling that still holds up today. The character development in FFVI is better than most modern games.</p>
                </div>
                <a href="#" class="comment-reply">Reply</a>
            </div>  -->
            
            <form class="comment-form" method="POST">
                {% csrf_token %}
                <h3>Leave a Comment</h3>
                 <div class="form-group">
                    <label for="comment-name">Name</label>
                    <input name="name" maxlength="100" required="" aria-invalid="true" aria-describedby="id_name_error" type="text" id="id_name" name="author_name" placeholder="e.g. John Doe" required>
                </div>

                <div class="form-group">
                    <label for="comment-message">Comment</label>
                    <textarea id="comment-message" name="body" placeholder="e.g. lorem ..." required></textarea>
                </div>
                
                <button type="submit" class="btn">Post Comment</button>
            </form>
        </section>
        
        <!-- Related Posts -->
        <!-- <section class="related-posts">
            <h2 class="section-title">Related Posts</h2>
            <div class="posts-grid">
                <div class="post-card">
                    <div class="post-image" style="background-image: url('https://images.unsplash.com/photo-1535223289827-42f1e9919769?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                    <div class="post-content">
                        <span class="post-category">DIY Projects</span>
                        <h3 class="post-title">Building a Retro PC for Modern Use</h3>
                        <p class="post-excerpt">How I turned an old 90s case into a functional modern computer with all the nostalgic vibes but none of the limitations.</p>
                        <div class="post-meta">
                            <span>May 15, 2023</span>
                            <span>12 min read</span>
                        </div>
                    </div>
                </div>
                
                <div class="post-card">
                    <div class="post-image" style="background-image: url('https://images.unsplash.com/photo-1581591527152-f6b5d7647b6a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                    <div class="post-content">
                        <span class="post-category">Retro Gaming</span>
                        <h3 class="post-title">Rediscovering Point-and-Click Adventures</h3>
                        <p class="post-excerpt">A look back at the golden age of adventure games and why their puzzle-solving charm still captivates players today.</p>
                        <div class="post-meta">
                            <span>April 30, 2023</span>
                            <span>7 min read</span>
                        </div>
                    </div>
                </div>
                
                <div class="post-card">
                    <div class="post-image" style="background-image: url('https://images.unsplash.com/photo-1593359677879-a4bb92f829d1?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                    <div class="post-content">
                        <span class="post-category">Tech Nostalgia</span>
                        <h3 class="post-title">Why We Still Love CRT Monitors</h3>
                        <p class="post-excerpt">Exploring the unique visual qualities of CRT displays and why retro gamers still seek them out for authentic experiences.</p>
                        <div class="post-meta">
                            <span>April 18, 2023</span>
                            <span>9 min read</span>
                        </div>
                    </div>
                </div>
            </div>
        </section> -->
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>CyberCozy</h3>
                    <p>A cozy corner of the internet for 90s kids and retro tech enthusiasts.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-tumblr"></i></a>
                        <a href="#"><i class="fab fa-discord"></i></a>
                        <a href="#"><i class="fab fa-github"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>Categories</h3>
                    <ul>
                        <li><a href="#">Retro Gaming</a></li>
                        <li><a href="#">Tech Nostalgia</a></li>
                        <li><a href="#">DIY Projects</a></li>
                        <li><a href="#">Anime & Manga</a></li>
                        <li><a href="#">Coding & Web</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#">About</a></li>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">Contact</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Webring</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2023 CyberCozy. Made with <i class="fas fa-heart blink"></i> and too much caffeine.</p>
            </div>
        </div>
    </footer>

    <script>
        // Dark Mode Toggle Functionality
        const themeToggle = document.getElementById('themeToggle');
        const mobileThemeToggle = document.getElementById('mobileThemeToggle');
        const body = document.body;
        
        // Check for saved theme preference or respect OS preference
        const savedTheme = localStorage.getItem('theme') || 
                          (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        
        // Apply the saved theme
        body.setAttribute('data-theme', savedTheme);
        
        // Toggle theme on button click
        function toggleTheme() {
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        }
        
        themeToggle.addEventListener('click', toggleTheme);
        mobileThemeToggle.addEventListener('click', toggleTheme);
        
        // Listen for system theme changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
            // Only auto-switch if user hasn't manually set a preference
            if (!localStorage.getItem('theme')) {
                body.setAttribute('data-theme', e.matches ? 'dark' : 'light');
            }
        });
        
        // Mobile Navigation Toggle
        const mobileNavToggle = document.getElementById('mobileNavToggle');
        const mobileNav = document.getElementById('mobileNav');
        const overlay = document.getElementById('overlay');
        
        function toggleMobileNav() {
            mobileNav.classList.toggle('active');
            overlay.classList.toggle('active');
            document.body.style.overflow = mobileNav.classList.contains('active') ? 'hidden' : '';
            
            // Change icon based on menu state
            const icon = mobileNavToggle.querySelector('i');
            if (mobileNav.classList.contains('active')) {
                icon.classList.remove('fa-bars');
                icon.classList.add('fa-times');
            } else {
                icon.classList.remove('fa-times');
                icon.classList.add('fa-bars');
            }
        }
        
        mobileNavToggle.addEventListener('click', toggleMobileNav);
        overlay.addEventListener('click', toggleMobileNav);
        
        // Close mobile menu when clicking on a link
        const mobileNavLinks = document.querySelectorAll('.mobile-nav a');
        mobileNavLinks.forEach(link => {
            link.addEventListener('click', toggleMobileNav);
        });
        
        // Close mobile menu on escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && mobileNav.classList.contains('active')) {
                toggleMobileNav();
            }
        });
        
        // Add some 90s sound effects for buttons
        const buttons = document.querySelectorAll('.btn, .theme-toggle, .mobile-nav-toggle');
        buttons.forEach(button => {
            button.addEventListener('click', function() {
                // In a real implementation, you could play a sound effect here
                // For now, we'll just add a visual effect
                this.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 100);
            });
        });
    </script>
</body>
</html>